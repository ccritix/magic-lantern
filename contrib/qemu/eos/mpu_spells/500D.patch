--- 500D.h
+++ 500D.h
@@ -1,3 +1,6 @@
+/**
+ * 500D (menu navigation works)
+ */
 static struct mpu_init_spell mpu_init_spells_500D[] = {
     { { 0x06, 0x04, 0x02, 0x00, 0x00 }, {                       /* spell #1 */
         { 0x0a, 0x08, 0x03, 0x2f, 0x00, 0x00, 0x00, 0x00, 0x00 },/* reply #1.1 */
@@ -110,50 +113,9 @@
         { 0x06, 0x05, 0x06, 0x13, 0x00, 0x00 },                 /* reply #26.4, bindReceiveSwitch(19, 0) */
         { 0x06, 0x05, 0x06, 0x1c, 0x00, 0x00 },                 /* reply #26.5, bindReceiveSwitch(28, 0) */
         { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x00, 0x00 }, {                 /* spell #27 */
-     // { 0x06, 0x05, 0x06, 0x00, 0x01, 0x00 },                 /* reply #27.1, BGMT_MENU, GUI_Control:6, bindReceiveSwitch(0, 1) */
-        { 0 } } },
-    { { 0x06, 0x05, 0x04, 0x00, 0x01, 0x00 }, {                 /* spell #28, NotifyGUIEvent(1) */
-        { 0x20, 0x1e, 0x0a, 0x08, 0x57, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x98, 0x10, 0x00, 0x58, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },/* reply #28.1, PD_NotifyOlcInfoChanged */
-        { 0x0e, 0x0c, 0x0a, 0x08, 0x09, 0x00, 0x15, 0x00, 0x01, 0x00, 0x00, 0x48, 0x00 },/* reply #28.2, PD_NotifyOlcInfoChanged */
-        { 0x06, 0x05, 0x04, 0x00, 0x01, 0xaa },                 /* reply #28.3, PROP_GUI_STATE(1) */
-        { 0 } } },
-    { { 0x08, 0x06, 0x00, 0x00, 0x04, 0x00, 0x00 }, {           /* spell #29, Complete WaitID = 0x80020000 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x00, 0x00 }, {                 /* spell #30 */
-     // { 0x06, 0x05, 0x06, 0x01, 0x01, 0x00 },                 /* reply #30.1, BGMT_INFO, GUI_Control:7, bindReceiveSwitch(1, 1) */
-        { 0 } } },
-    { { 0x06, 0x05, 0x04, 0x00, 0x02, 0x00 }, {                 /* spell #31, NotifyGUIEvent(2) */
-        { 0x24, 0x22, 0x0a, 0x08, 0x5f, 0x00, 0x01, 0x00, 0x01, 0x03, 0x98, 0x10, 0x00, 0x58, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x48, 0x04, 0x01, 0x00, 0x15, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },/* reply #31.1, PD_NotifyOlcInfoChanged */
-        { 0x06, 0x05, 0x04, 0x00, 0x02, 0xaa },                 /* reply #31.2, PROP_GUI_STATE(2) */
-        { 0 } } },
-    { { 0x08, 0x06, 0x00, 0x00, 0x04, 0x00, 0x00 }, {           /* spell #32, Complete WaitID = 0x80020000 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x00, 0x00 }, {                 /* spell #33 */
-     // { 0x06, 0x05, 0x06, 0x01, 0x01, 0x00 },                 /* reply #33.1, BGMT_INFO, GUI_Control:7, bindReceiveSwitch(1, 1) */
-        { 0 } } },
-    { { 0x06, 0x05, 0x04, 0x00, 0x01, 0x00 }, {                 /* spell #34, NotifyGUIEvent(1) */
-        { 0x20, 0x1e, 0x0a, 0x08, 0x57, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x98, 0x10, 0x00, 0x58, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },/* reply #34.1, PD_NotifyOlcInfoChanged */
-        { 0x0e, 0x0c, 0x0a, 0x08, 0x09, 0x00, 0x15, 0x00, 0x01, 0x00, 0x00, 0x48, 0x00 },/* reply #34.2, PD_NotifyOlcInfoChanged */
-        { 0x06, 0x05, 0x04, 0x00, 0x01, 0xaa },                 /* reply #34.3, PROP_GUI_STATE(1) */
-        { 0 } } },
-    { { 0x08, 0x06, 0x00, 0x00, 0x04, 0x00, 0x00 }, {           /* spell #35, Complete WaitID = 0x80020000 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x00, 0x00 }, {                 /* spell #36 */
-     // { 0x06, 0x05, 0x06, 0x00, 0x01, 0x00 },                 /* reply #36.1, BGMT_MENU, GUI_Control:6, bindReceiveSwitch(0, 1) */
-        { 0 } } },
-    { { 0x06, 0x05, 0x04, 0x00, 0x00, 0x00 }, {                 /* spell #37, NotifyGUIEvent(0) */
-     // { 0x06, 0x05, 0x06, 0x09, 0x00, 0x00 },                 /* reply #37.1, BGMT_UNPRESS_ZOOM_IN, GUI_Control:12, bindReceiveSwitch(9, 0) */
-     // { 0x06, 0x05, 0x06, 0x0a, 0x00, 0x00 },                 /* reply #37.2, BGMT_UNPRESS_ZOOM_OUT, GUI_Control:14, bindReceiveSwitch(10, 0) */
-        { 0x24, 0x22, 0x0a, 0x08, 0x5f, 0x00, 0x01, 0x00, 0x01, 0x03, 0x98, 0x10, 0x00, 0x58, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x48, 0x04, 0x01, 0x00, 0x15, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },/* reply #37.3, PD_NotifyOlcInfoChanged */
-        { 0x06, 0x05, 0x04, 0x00, 0x00, 0xaa },                 /* reply #37.4, PROP_GUI_STATE(0) */
-        { 0 } } },
-    { { 0x08, 0x06, 0x00, 0x00, 0x04, 0x00, 0x00 }, {           /* spell #38, Complete WaitID = 0x80020000 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x01, 0x00 }, {                 /* spell #39 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x01, 0x00 }, {                 /* spell #40 */
-        { 0 } } },
-    { { 0x06, 0x05, 0x03, 0x19, 0x00, 0x00 }, {                 /* spell #41 */
-        { 0 } } },
+    
+    #include "NotifyGUIEvent.h"
+    #include "UILock.h"
+    #include "CardFormat.h"
+    #include "Shutdown.h"
 };
