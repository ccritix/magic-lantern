Magic Lantern 0.2 for Canon 550D, Firmware 1.0.9
================================================


Features
--------

* GUI menus: press the ERASE button to display them
* Bit rate control (QScale parameter) for the H.264 encoder
* Zebra stripes for overexposed / underexposed areas
* Spotmeter, histogram
* Cropmarks (16:9, Cinemascope, Fisheye)
* Simple intervalometer
* Trap Focus: camera takes a picture when something comes in focus
* Wireless trigger with the LCD face sensor & your own hand
* AE bracketing (like on 5D2 ML)
* Rack focus
* Stack focus (Live View only)
* Lens data computation 
* Onscreen audio meters
* Manual audio gain, selectable input source, disable AGC and digital filters
* Display time remaining during video recording
* Debug functions (display CMOS temperature, screenshot, logging)
* Fine tuning for ISO and shutter speeds; also ISO 25600
* Kelvin white balance for video mode
* Clean LiveView display without any overlays (selectable)

Known issues
------------

* Stack focus only works in Live View, after going through Play mode first. 
  Sometimes, rack & stack focus simply refuse to work, and you need to restart your camera.
* After closing ML menu, screen may not redraw automatically 
  (half-press the shutter or press ``MENU`` to trigger a redraw)
* Sometimes the menu gets overwritten by Canon's drawing routines, or flickers. 
* Audio monitoring does not work. We don't know how to enable it 
  without breaking USB and maybe other functions. If you need this feature, 
  please uncomment the last line from ``hotplug.c`` and build a custom ``autoexec.bin``.
  Do this at your own risk, since this may cause other problems, too.


Important notes
---------------

* If you have a bootable SD card and have the ``DISKBOOT`` flag 
  set in the camera (which the installer does), and you do not have 
  an ``AUTOEXEC.BIN`` file on the card the camera **WILL NOT BOOT!**
  It will hang and not wake up until the battery is removed.
  
* If you encounter a "locked up" camera, **quickly remove the battery**.
  Otherwise the ARM might be in a tight-loop and get very hot, very quickly. 
  Your battery will run down and your LCD might show some discoloration.
  
* When in doubt, remove the battery and reboot. 

* **And, remember that this software can damage or destroy your camera.**


Menu options
------------

Press ERASE button to show the menu. Use arrows to navigate, ``SET`` to change values forwards
and ``DISP`` to change values backwards.

Audio
~~~~~

.. image:: AudioMenu-550D.png
    :alt: thumb|right|Audio menu

Audio tweaks.

**AudioMeter: ON/OFF**
  Draw the audio meters or not.

**Output vol (dB)**
  Gain to external audio - currently this is the A/V jack (?) so not audible on just the camera

**Analog Gain (dB)**
  Gain applied to both inputs in the analog domain - intended as mic-type preamp, but always preferable to digital gain (unless you want different gain or run out of analog).

**L-DigiGain and R-DigiGain (dB)**
  Digital gain applied separately to the L and R channel.

**AGC: ON/OFF**
  Enable/disable Automatic Gain Control. Turn this to OFF to prevent hiss noise when recording silence.

**Filters: ON/OFF**
  Enable/disable digital audio filters (High Pass Filter, Low Pass Filter and stereo emphasis)

**Inp**
  Input source: Internal mic (dual mono); int L ext R; ext stereo; int L ext Bal (balanced Left + Right).

Video
~~~~~

.. image:: VideoMenu-550D.png
    :alt: thumb|right|Video menu


Video overlays: histogram, zebras, cropmarks, spotmeter.

**Global Draw: ON/OFF**
  Enable/disable drawing extra graphics elements 
  (zebra, cropmarks, histogram, spotmeter, audio meters).

  Tip: use this to quickly turn them off.

**Histogram: ON/OFF**
  Show a histogram for the luma (Y) channel of the LiveView image. Colorspace is YUV.

**Zebras: ON/OFF**
  Enable/disable zebra stripes, which indicate overexposed or underexposed areas.

**ZebraThrLO, ZebraThrHI**
  Thresholds for underexposure and overexposure. 
  Brightness values are between 0 and 255.

**CropM**
  Select cropmarks (cycle between the configured ones).

  There are 3 predefined cropmarks in the zip archive:
  HD with Title & Action Safe and Cinemascope provided by *CameraRick* from the ``cinema5d`` forum, 
  and a cropmark for framing fisheye stills with Samyang/8mm.

.. image:: Cropmarks550D.png
    :alt: 400px|center

  If you use custom cropmarks, you have to set their name manually in the config file.
  See the "Hidden settings" section. You can configure max. 3 cropmark files, and give them 
  short 8:3 names.
  
  An exclamation mark (!) displayed in the menu means "File not found". 
  
  See [[Cropmarks]] for how to create custom cropmarks.

{{clr}}

**ClrScr: OFF/HalfShutter/Always**
  
  **HalfShutter**: Hold the shutter half-pressed, or the ``*`` button, or DOF preview for around 1 second,
  and this will clear all the overlays from the Live View display (audio, zebra, crops, shutter speeds...).
  It allows you to compose the picture without any extra distractions. 
  
  This works best when autofocus is assigned to the ``*`` button (from Custom Functions, set CFn.9 to 1: ``Shutter/AE lock button`` = ``AE lock/AF``).
  
  Tip: also use it for cleaning up unwanted Magic Lantern garbage left on the screen.
  
  **Always**: In this mode, all the overlays are erased from the screen (100% clean display). Zebras & friends are still available when you enter the Q menu, and then disappear.

**Spotmeter: ON/OFF/Hidden**
  Measure brightness in the center of the frame, and display it as a percentage.
  Indicator is at the bottom on the screen, centered horizontally. It displays 
  a small marker in the center of the screen. If the current cropmark already includes
  a center marker, use the Hidden option.

Shoot
~~~~~

.. image:: ShootMenu-550D.png
    :alt: thumb|right|Shoot menu

Functions for stills shooting.

**IntervalTime**
  Time delay for intervalometer, in seconds.

**Intervalometer: ON/OFF**
  Start/stop intervalometer. 
  
  Tip: shoot in manual mode and switch the lens to MF.

**LCD RemoteShot: ON/OFF**
  Start/stop shutter release with the LCD sensor. To take a picture, 
  put your hand near the LCD sensor. 

  This is useful for avoiding camera shake without extra $$$, 
  especially if you don't have a sturdy tripod.
  
  To use it, select one of P,S,A,M modes, turn OFF Live View, 
  and make sure "LCD auto off" is enabled (in the Canon menu, wrench 1).
  
  Do not turn on Live View while this option is active (it will take a picture and it shouldn't).

You can also stop the intervalometer and remote shooting mode
by pressing PLAY or MENU.

**Trap Focus: ON/OFF**
  You hold the shutter half-pressed; camera takes a picture when something comes into focus.
  
  This works if the lens is set to Manual focus (MF) and outside Live View. It does not work with lenses without chip.

**ISO**
  Custom steps for ISO. Possible values:
  
  0 (Auto), 100, 110, 115, 125, 140, 160, 170, 185, 200, 220, 235, 250, 280, 320, 350, 380, 400, 435, 470, 500, 580, 640, 700, 750, 800, 860, 930, 1000, 1100, 1250, 1400, 1500, 1600, 1750, 1900, 2000, 2250, 2500, 2750, 3000, 3200, 3500, 3750, 4000, 4500, 5000, 5500, 6000, 6400, 7200, 8000, 12800, 25600.
  
  In video mode, ISO only goes up to 6400.
  
  To get ISO values higher than 6400, turn on ISO Expansion from Custom Functions (CFn 1).

**Shutter**
  Custom steps for shutter speed. Possible values:
  
  1/30, 33, 37, 40, 45, 50, 53, 57, 60, 67, 75, 80, 90, 100, 110, 115, 125, 135, 150, 160, 
  180, 200, 210, 235, 250, 275, 300, 320, 360, 400, 435, 470, 500, 550, 600, 640, 720, 800,
  875, 925, 1000, 1100, 1200, 1250, 1400, 1600, 1750, 1900, 2000, 2150, 2300, 2500, 2800, 3200,
  3500, 3750, 4000.
  
**WB**
  Kelvin white balance. This feature is still experimental and only works in video mode.
  
  Range: 1700 ... 10000.

Brack
~~~~~

.. image:: BrackMenu-550D.png
    :alt: thumb|right|Bracketing menu

AE bracketing.

**Test bracket**
  Take a few pictures with the selected settings.

**AE Count**
  Number of pictures to take.

**AE Step**
  AE step size between two shots (in EV).

TODO: move Stack focus in this menu maybe.

Focus
~~~~~

.. image:: FocusMenu-550D.png
    :alt: thumb|right|Focus menu

**Focus dir**
  This is the direction the lens moves when pressing the camera's Zoom Out button to set the focus start and end points.

**Focus A**
    This is end point of rack focus. To set, focus the lens with the Zoom Out button, then press "Set". 

**Rack Focus**
    Triggers the rack focus operation that moves between the start and end focus points. After the move is complete pressing again reverses the move. 

**Run Stack focus**
  This selection will shoot a series of photographs with varying focal distances. You can also call this "focus bracketing".
  It is used in macro photography to assemble sharper final images by merging photos where each has a different focus point. 
  
  To configure focus step and number of photos, use the hidden settings ``focus.step`` and ``focus.count``.

The following items are display only:

**Focal Dist**
    The distance to the focal point. Value is returned by most newer Canon lenses. If the lens does not report any distance information, 0 will be displayed and the DOF calculations will not be correct. 
    
    See also [[Focus distance]].

**Hyperfocal**
    The hyperfocal distance is the point of focus where everything from half that distance to infinity falls within the depth of field. This is the largest depth of field possible for the current f-number. 

**DOF Near**
    The nearest distance in which objects appear in focus. 

**DOF Far**
    The farthest distance in which objects appear in focus. 

See also the description from the `5D2 ML User Guide <http://magiclantern.wikia.com/wiki/Magic_Lantern_0.1.6_User_Manual#Focus_menu>`_.

**How rack focus works**

Now that you know what the buttons are about, here is how you make it work:

1. After opening the focus menu, pick the end point of your rack focus, focusing manually with your lens on that point.

2. Next on the Focus Menu, select the direction you will have to focus to in order to find the start point. If the start point is a closer focus, pick ``Near``, if it a farther away focus point, pick ``Far``. ( Remember, you are simply telling camera which direction to go to find the start point.)

3. Next, scroll down to ``Focus A``. You need to zero this setting out, before going on. Press ``Set`` to zero it out.

4. Once that is completed you will use the ``Zoom Out`` button in the right hand upper corner of the back of the camera to move the focus point to your start point.

5. Next select the time period of the pull, by scrolling down to rack speed. The lower the number, the longer the rack will take. It is recommended for testing purposes to start around 20.

6. Once that is done, you need to exit the Magic Lantern Menu, to start the camera recording

7. Once the camera is recording, re-enter the Magic Lantern Focus Menu, and scroll to ``Rack Focus``. To start the rack focus, press ``Set``. You should see the rack focus commence and complete its cycle.

8. To return to the beginning point, you can press ``Set`` again to return to that point, once again.

**Note:** the rack focus command may "stutter" while racking with some lenses, causing overshoot or undershoot of the desired position. This feature is still under development and should be more mature in a later version.

Debug
~~~~~

.. image:: DebugMenu-550D.png
    :alt: thumb|right|Debug menu

**QScale**
  Controls the H.264 QScale parameter, which affects video bitrate. 
  Lower values mean higher bitrates. OFF disables QScale control.
  
  When QScale is enabled, camera records in VBR mode (variable bitrate). 
  When QScale is OFF, the bitrate is (more or less) constant (CBR mode).
  
  See [[Bit rate]] page for details.
  
  Default range is [-1 ... -16]. This can be changed from config file, 
  but qscale is restricted to negative values only, 
  due to limitations in config file parser.
  
  QScale setting is not saved; it is applied only when you select this option
  from menu. It may be overwritten by camera firmware when changing video modes.
  When the camera starts, it is OFF.
  
  You can change QScale before starting recording, or right in the middle of the movie!

**Save config**
  Save current settings to ``MAGIC.CFG``.

**CMOS temp**
  Temperature of the CMOS sensor (EFIC temperature), in raw units.

**Draw palette**
  Tests the 8-bit bitmap palette, which is used for video overlays. See [[VRAM]].

**Screenshot (10 s)**
  Print screen after 10 seconds (it saves a BMP file). 
  Only the bitmap overlays are included in the screenshot (i.e. no live view image).

**Dump dmlog**
  Saves a log which contains DebugMsg output.
  See [[Debugging Magic Lantern]] page.

**Toggle draw_prop**
  Display property changes in real-time.
  See [[Properties]].

**Toggle draw_event**
  Display GUI events in real-time.
  See [[GUI_Events/550D]].

**Toggle mem_spy**
  Display memory addresses which change, but not those which change like mad. 
  Useful for detecting interesting addresses inside the camera RAM (like sensor & button locations).
  
  Start address and size is selected with the hidden settings ``debug.mem-spy.*``
  (see ``debug.c`` for details). You can also display only "small" or "boolean" values.
  
  Trying to spy the camera_engine addresses seems to cause trouble (camera freeze). 
  Probably it's not safe to read data from those areas.

**Powersave**
  Disable the powersave so that the LiveView never shuts off.

  WARNING -- this can cause problems with your sensor!

  **DO NOT LEAVE THE CAMERA ON CONTINUOUSLY!**

Some items from this menu may not be available in release builds; 
you can uncomment them from ``debug.c`` and create a custom ``autoexec.bin``.

Boot
~~~~

.. image:: BootMenu-550D.png
    :alt: thumb|right|Boot menu

Settings related to the Magic Lantern boot process.

**Write MBR**
  Try to make the card bootable, by writing the two labels (EOS_DEVELOP and BOOTDISK) to the MBR. Does not work yet.

**Autoboot: ON/OFF**
  Toggle the ``DISKBOOT`` flag in the NVRAM by calling ``bootdisk_enable()`` / ``bootdisk_disable()``
  (these are registered by camera FW as eventprocs with names ``EnableBootDisk`` and  ``DisableBootDisk``).
  
  If you disable Autoboot, Magic Lantern won't boot any more (you will have to reinstall it).
  
  If you do not have access to the menu, you can use the hidden setting ``magic.disable_bootdiskf`` for this.

This menu may not be available in release builds, 
because these settings are potentially dangerous.
